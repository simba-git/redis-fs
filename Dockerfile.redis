# Redis server with fs.so module
FROM redis:7-bookworm

# Install build tools
RUN apt-get update && apt-get install -y \
    build-essential \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# Copy and build the Redis module
COPY fs.c fs.h path.c path.h redismodule.h Makefile ./
RUN make

# Configure Redis to load the module
CMD ["redis-server", "--loadmodule", "/app/fs.so"]

